# 3 глава
## Рабочие станции
Системное администрирование включает в себя установку, обновление и настройку операционных систем на рабочих станциях. Автоматизация этих задач поможет упростить процесс и предотвратить различные проблемы. Также рассматривается жизненный цикл компьютеров и их операционных систем, от нового состояния до списания. Важно сохранять максимально возможное время пребывания компьютера в сконфигурированном состоянии, что зависит от архитектурных решений поставщика операционной системы. Важно также перемещать данные на файловые серверы для предотвращения потери данных в случае переустановки.
При правильном обслуживании рабочих станций новые сотрудники получают все необходимое, включая электронную почту. Остальные сотрудники не замечают появления новых рабочих станций. Развертывание новых приложений не прерывает рабочий процесс, а все ошибки исправляются своевременно. Обслуживание операционных систем сводится к выполнению трех основных задач: установка программного обеспечения, обновления и настройка сетевых параметров. Автоматизация этих задач улучшает ситуацию. Рабочая станция - компьютер для одного пользователя, включая настольные компьютеры, ноутбуки, компьютеры с удаленным доступом и виртуальные машины. Рабочие станции обычно используются в больших количествах и имеют долгий жизненный цикл. Процессы перевода машин в другое состояние жизненного цикла повторяются.
В данном тексте автор рассматривает жизненный цикл компьютеров, включая процессы установки, восстановления и списания. Он обсуждает важность планирования и управления этими процессами, а также влияние архитектурных решений на интегритет операционных систем. Также отмечает необходимость финансового планирования и управления активами в контексте жизненного цикла компьютеров. Автор также касается понятия платформы и различных комбинаций поставщиков оборудования и операционных систем.

## Основы
С обслуживанием операционных систем рабочей станции связаны три критически важных аспекта:
1. Первоначальная установка системного ПО и приложений.
2. Обновление системного ПО и приложений.
3. Настройка сетевых параметров.

Автоматизация этих задач упрощает выполнение других задач и снижает затраты. Например, установка и настройка сети на компьютерах с разными платформами может требовать создания полной автоматизации по мере расширения сети.

Системные администраторы могут предоставить полноценную поддержку "привилегированным объектам", таким как платформы, которые требуют специальной поддержки для определенных проектов. В данном случае, автоматизация этих задач помогает снизить нагрузку на системных администраторов и минимизировать затраты на обслуживание. 

В целом, автоматизация обслуживания позволяет оптимизировать процессы и улучшить безопасность сети, что делает ее более эффективной.

###  Установка ОС
Каждый поставщик операционных систем предлагает систему автоматической установки ОС, такую как JumpStart в Solaris, KickStart в RedHat Linux, RoboInst в SGI IRIX, Ignite‑UX в HP‑UX, и служба удаленной установки (Remote Installation Service) в Microsoft Windows. Автоматизация установки ОС экономит время и деньги, предотвращает ошибки и обеспечивает однородность конфигурации машин. Программа AutoLoad упростила жизнь системных администраторов и пользователей, минимизируя ошибки и облегчая процесс установки.
#### Удостоверьтесь, что ваша автоматизированная система действительно автоматизирована
Важно довести процесс автоматизации до конца и убедиться, что все работает правильно. Тестирование системы на людях, не знакомых с процессом, поможет выявить проблемы и сделать улучшения. Автоматизация процессов может быть сложной, но если она выполнена правильно, то может существенно улучшить эффективность и качество работы.
Задача настройки системы автоматической установки требует усилий, но окупается временем и экономит затраты в будущем. Самый важный аспект автоматизации - полная автоматизация установки. Настройка должна быть выполнена должным образом, и лучшие системы установки взаимодействуют с человеком в самом начале, а затем завершают работу полностью автоматически. Полное отсутствие взаимодействия с человеком в процессе установки - признак эффективной автоматизации.

#### Частично автоматизированная установка
Частичная автоматизация предпочтительнее полного отсутствия. Необходимо обеспечить временные средства для некоторых этапов, пока система установки не будет работать идеально. Отсутствие автоматизации оправдано, если используется небольшое количество тех или иных платформ, если затраты на автоматизацию превышают экономию времени или если поставщик не поддерживает автоматизацию. Документирование всего процесса важно, но не заменяет автоматизацию. Некоторые этапы установки могут быть автоматизированы, как, например, процесс инициализации. Клонирование жестких дисков применяется в некоторых сетях для создания новых машин, но автоматизация предпочтительнее из-за удобства и вариативности.

####  Стоит ли доверять установкам от поставщиков
Рекомендуется переустанавливать операционную систему (ОС) с нуля. Поставщики могут вносить изменения в предустановленную ОС, что может вызвать проблемы. Переустановка может упростить установку других приложений и конфигураций. В случае сбоя, переустановка ОС с нуля облегчит вам жизнь. Пример с Томом из истории показывает, что использование предустановленной ОС может привести к проблемам. Также стоит учесть, что приложения и драйверы, включенные в предустановленную ОС, могут быть критически важными, особенно для ноутбуков.
Компьютеры, как правило, поставляются с предустановленной операционной системой (ОС). Другие могут установить ОС, но мы считаем, что переустановка ОС в конечном итоге проще. Переустановка ОС с нуля предпочтительнее из-за простоты установки приложений и конфигурации ОС, а также предсказуемости состояния каждой машины. Также, со временем эти проблемы стали меньше из-за ухода от специфичных устройств в ноутбуках. Другие поставщики могут предустанавливать систему с предоставленного образа диска, что избавит вас от самостоятельной установки, но обязанности по обновлению мастер-образа все равно остаются на вас. Контрольные списки при установке ОС могут улучшить согласованность процесса, даже если процесс установки полностью автоматизирован.

### Обновление системного ПО и приложений
Системные администраторы должны автоматизировать обновление программного обеспечения, так как с течением времени возникают новые ошибки и бреши в системе безопасности, а также требуются новые приложения. Различные системы, такие как AutoPatch, SMS, RPM и прочие, позволяют устанавливать новые приложения, обновлять существующие, а также устанавливать патчи ОС. Например, одна компания потратила много времени на установку нового клиентского ПО на каждую рабочую станцию из-за отсутствия системы автоматизации обновлений, в то время как другая, с автоматизированной системой обновлений, быстро внесла изменения без дополнительных затрат.

#### Процесс обновления отличается от установки
Автоматизация обновления программного обеспечения (ПО) и его первичной установки различаются в нескольких аспектах: 
1. Первичную установку проводят на отключенном узле, в то время как обновление устанавливается на рабочие машины.
2. Обновление программного обеспечения должно быть способно работать при активном использовании сети и не требует доступа к рабочим станциям, в отличие от первичной установки, которая может требовать физического доступа.
3. При проведении первичной установки состояние машины более контролируемо, в то время как обновление машин уже используемых сотрудниками требует более точной автоматизации из-за возможных ошибок в ОС.
4. Некоторые обновления невозможно установить, когда машина используется, в отличие от первичной установки.
5. Системы обновления должны уметь отслеживать момент, когда узел сети доступен и готов для обновлений, особенно при мультисистемной загрузке или отсутствии узла в сети.
Ошибка при первичной установке не всегда заметна для пользователя, в отличие от ошибок при обновлении, которые могут привести к неработоспособности машины.

### Конфигурирование сети
Третий компонент, необходимый для сетей, объединяющих большое количество рабочих станций, – это способ автоматизации обновления сетевых параметров – тех считанных битов информации, от которой часто зависит загрузка компьютеров и их объединение в сеть. Эта информация может значительно различаться в отдельных подсетях или даже в отдельных узлах сети. А следовательно, такое обновление должно производиться иначе, чем, скажем, установка приложений, когда одно и то же приложение устанавливается на всех узлах сети с одинаковой конфигурацией.

Поэтому система автоматизации обновления сетевых параметров обычно создается отдельно от остальных систем. Наиболее распространенная система автоматизации этого процесса – DHCP. Серверы DHCP от некоторых поставщиков настраиваются за несколько секунд, другие серверы – значительно дольше. Создание глобальной архитектуры DNS/DHCP с десятками или сотнями сетей требует основательного планирования и специальных знаний. У некоторых поставщиков DHCP есть профессиональные обслуживающие организации, которые помогают в этом процессе, что особенно ценно для глобальных предприятий.

Для малых компаний может быть неочевидна ценность затраты пары дней на изучение того, что, скорее всего, поможет вам сэкономить лишь минуту-другую во время настройки машины. Ввести вручную IP-адрес несложно, и, если уж на то пошло, почему бы не ввести вручную сетевую маску и пару других параметров, верно?

Неверно. Конечно, вы сэкономите день или два, если не настроите DHCP-сервер. Но вот в чем проблема: помните, в начале этой главы мы упоминали о возможной расплате за беспечность? Если вы не используете DHCP, то рано или поздно столкнетесь с жестокой реальностью. В конце концов вам потребуется изменить нумерацию IP или маску подсети, IP-адрес DNS-сервера или несколько параметров сети. Если у вас нет DHCP, вы потратите недели или месяцы на одно изменение, потому что вам придется организовать команду сотрудников, чтобы внести изменения на все узлы вашей сети. Незначительные вложения в DHCP в конечном итоге сделают все будущие изменения практически бесплатными.

Все, что должно быть сделано, должно быть сделано хорошо. DHCP тоже можно применять хорошо или плохо. В следующем разделе мы обсудим то, что нам об этом известно.

#### Используйте шаблоны, а не конфигурируйте каждый отдельный узел

Системы DHCP должны иметь систему шаблонов. Некоторые системы DHCP хранят отдельные параметры, присвоенные каждому отдельному узлу сети. Другие системы DHCP хранят шаблоны, описывающие, какие параметры присваиваются узлам различных классов. Преимущество шаблонов в том, что при внесении изменений на множестве узлов вам нужно будет просто изменить шаблон, что значительно лучше, чем прокручивать длинный список узлов сети, пытаясь найти те, которые требуется изменить. Еще одно преимущество в том, что значительно уменьшается вероятность появления ошибки в синтаксисе, если конфигурационный файл генерируется программой. Исходя из того, что шаблоны синтаксически правильны, конфигурация тоже будет верной.

Такая система необязательно должна быть сложной. Многие системные администраторы пишут небольшие программы, чтобы создать свою систему шаблонов. Список узлов сети хранится в базе данных (или даже в простом текстовом файле), и программа использует эти данные для конфигурирования сервера DHCP. Вместо того чтобы вводить информацию по каждому отдельному узлу сети в новый файл или создавать сложную базу данных, информацию можно внедрить в вашу существующую базу данных или файл с перечнем оборудования. Например, в UNIX-сетях достаточно просто ввести эту информацию в уже ведущийся файл /etc/ethers. Этот файл затем используется программой, которая генерирует конфигурацию DHCP.

### Старайтесь не использовать динамический DNS сервер с DHCP
DHCP-системы обновляют динамические DNS-серверы, но мы не довольны этой функцией, так как она усложняет систему и создает риск безопасности. В системах с динамическим DNS-сервером, клиентский узел сообщает серверу DHCP, какое имя узла должно быть, и сервер DHCP отправляет обновления на DNS-сервер. Независимо от сети, к которой подключена машина, информация DNS для узла всегда соответствует имени узла. Узлы со статической арендой всегда имеют одно и то же имя в DNS, так как они всегда получают один и тот же IP-адрес. Узлы с динамической арендой выбирают IP-адрес из пространства адресов в DNS, которое имеет шаблонное имя. Например, dhcp-pool-10, dhcp-pool-11, dhcp-pool-12. Неважно, какой узел получит адрес, его имя в DNS всегда будет dhcp-pool-10. Это не соответствует имени узла, которое хранится в его конфигурации. Если узел является сервером, это несоответствие имеет значение. Если узел не запускает службы, то его DNS имя не имеет значения. Если он запускает службы, то должен получить постоянную аренду DHCP и всегда иметь одно и то же фиксированное имя. Службы, которые позволяют узлам передавать файлы или общаться по голосу или видео, не используют DNS для поиска узлов. Они регистрируют IP-адрес узла с фиксированным именем и/или IP-адресом в центральном реестре. Разрешение клиентам устанавливать собственное имя может создать риск безопасности и путаницу в сети. Использование DHCP снижает риск ошибок при установке IP-адресов. Контроль и обслуживание имен в DNS должны осуществляться централизованной системой.

#### Управление сроками аренды DHCP
Управление арендой DHCP позволяет эффективно вносить изменения в сеть. Клиентам DHCP назначаются параметры на определенный срок времени. По истечении этого срока они должны обновить свою аренду. Если вы знаете о грядущих изменениях, можно уменьшить срок аренды, чтобы быстрее внести изменения. После проверки можно увеличить срок аренды до первоначального значения. Примером использования управления арендой является изменение IP-адреса DNS-сервера в Bell Labs. Пользователей временно перевели на другой DNS-сервер, чтобы избежать простоя до полного распространения изменений. Рекомендуется прочитать специализированные книги для определения оптимальной продолжительности аренды DHCP. В отделе компьютерных исследований Bell Labs в подсети используется пятиминутный срок аренды адресов для ноутбуков. Это позволяет пользователям быстро подключаться к сети и отключаться от нее.
 
## Тонкости. Полная уверенность в завершении
Есть автоматизированные процессы, но также есть и автоматизация процесса. Если мы уверены в процессе, мы не беспокоимся об ошибках и ищем новые способы его применения. Кальт использовал Solaris JumpStart в Bell Labs без ошибок и это позволило ему изменить предоставление услуг. Вовлечение пользователей в стандартизацию включает их в процесс разработки и определение приложений, соглашений об уровне обслуживания и управление версиями. В реальности платформы контролируются либо руководством, либо отделом системного администрирования.

### Разнообразие стандартных конфигураций
Наличие нескольких стандартных конфигураций может быть хорошим или плохим, и системный администратор решает, что лучше в данной ситуации. Для системных администраторов стандартизация имеет преимущества, но многие пользователи считают ее помехой. Использование одного и того же сервера и механизмов для всех стандартных конфигураций может усложнить их обслуживание. Создание единой обобщенной системы, способной выполнять множественные конфигурации и масштабироваться, приведет к успеху. Управление конфигурацией программного обеспечения относится как к серверам, так и настольным компьютерам. Установка серверов может быть настроена в соответствии с их особыми потребностями. Наличие автоматизированной системы установки может быть полезным для повышения пропускной способности развертывания резервных веб-серверов. Стандартные конфигурации также упрощают процесс обновления операционной системы.

### Заключение
В этой главе мы рассмотрели процессы, связанные с обслуживанием операционных систем на настольных компьютерах. Настольные компьютеры, в отличие
от серверов, как правило, развертываются в больших количествах, и все они
обладают практически одной и той же конфигурацией. У каждого компьютера
есть свой жизненный цикл, который начинается с установки ОС и заканчивается в тот момент, когда машину выключают в самый последний раз. В этот
период программное обеспечение компьютера постепенно приходит в негодность
в результате энтропии, обновляется и заново переустанавливается в начале
нового цикла. В идеале все узлы сети, относящиеся к определенной платформе,
в начале своего жизненного цикла должны иметь одну и ту же конфигурацию.
Обновляться они должны параллельно. Некоторые стадии жизненного цикла
важнее для пользователей, чем другие. Мы стремимся увеличить продолжительность более важных стадий и сократить продолжительность менее значительных.
Основу всего, чему посвящена данная глава, составляют три процесса:
1. Первичная установка ОС должна быть автоматизирована.
2. Обновление программного обеспечения должно быть автоматизировано.
3. Конфигурация сети должна администрироваться централизованно с помощью такой системы, как DHCP.

  Эти три задачи имеют критическое значение для экономного управления. Грамотное их выполнение позволит всем последующим процессам проходить более
гладко.

